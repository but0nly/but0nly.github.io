---
title: 跨域
date: 2023-10-05
tags: 
 - 前端
 - 浏览器
categories: 前端
keywords: 
 - 跨域 
---

- 所有的跨域，都需要经过 **server端** 的同意和配合
- 未经 **server 端**允许就实现跨域，这时候浏览器报跨域错误，并阻止我们访问响应数据
  
### 同源策略（SOP）
- 什么是“源”（origin）？
一个“源”由页面的*协议*、*域名*、*端口*三部分组成。
- 什么是“跨域”（cross-origin）
主要上述的三者中有任何一个不同，浏览器就会将其视为**跨域**
- 为什么需要*SOP*
**同源策略**的出现是为了隔离**恶意代码**，避免一个恶意网站的脚本在未经允许的情况下读取、修改你另一个标签中打开的含*敏感信息*的网站

#### 严格限制
- DOM/JavaScript访问限制：禁止JavaScript访问或操作不同源的`DOM`元素
- Cookie/Storage：`cookie`、`localstorage`、`seesionstorage`
- 数据访问限制：`ajax`请求

### 跨域出现
1. 网址`www.example.com`中的*javascript*请求`https://api.example.com`
2. 发出请求，服务端响应，状态码`200`
3. 并返回数据
4. 但是控制台报**跨域**错误

> *注意*：浏览器不是阻止请求发送，而是浏览器在收到响应后，检查响应头，发现`server`端没有授权，于是阻止`JavaScript`代码访问这个响应数据。

#### 原因
因为**同源策略**的原因，*发起方*和*请求方*需要*协议*、*域名*、*端口*都一致
