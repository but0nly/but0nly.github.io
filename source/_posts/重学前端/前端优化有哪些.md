---
title: 前端优化有哪些
date: 2023-10-17
tags:
 - 前端
categories: 前端
keywords: 
 - 性能优化
---

### 网络优化
---

- DNS 预解析： 提前解析IP地址 通过link标签 rel 设置 “dns-prefetch”
- 图片不要设置空的src：因为这样也会发出http请求
- 请求多域名：一些浏览器会限制同域名的并发数量，可以控制到2-4个域名。
- 使用缓存：协商缓存和强缓存，直接从本地取数据
- CDN网络：区域分发
- 压缩响应：Accept-Encoding 头来标识压缩支持，


### 渲染优化
---
- 降低选择器的复杂度：
	- 减少嵌套
	- 避免使用通配符
	- 利用继承
	- 正确使用类选择器和ID选择器
- 避免渲染阻塞：CSS使用Link标签或者CDN加速，尽早的加载CSS文件，避免影响合成renderTree
- 避免使用CSS表达式：会频繁计算
- 避免JS阻塞：使用defer和async，延迟脚本执行；
- 使用外链的JS和CSS：浏览器可以缓存他们，减少http请求
- 使用图标iconfont替代图片
- 首屏加载优化：
	- 使用骨架图或者加载动画
	- 按需加载，首页用不到的资源延迟加载
- 减少重绘和回流
	- 使用createDocumentFragment：不是真实的DOM部分
	- translate：不会触发回流
	- 通过`display：none`把DOM离线了再修改，修改完了再把它显示出来
	- 批量处理DOM操作
	- 使用 `requestAnimationFrame` 处理动画


### JS优化
---

- 避免使用JS动画
- 使用事件委托
- 防抖和节流
- 多进程 webworker
- 计算结果缓存



### 图片优化
---

- 雪碧图
- 图片懒加载
- 使用CSS3代表图片
- 图片压缩
- 使用渐进式jpeg
- 使用webp格式的图片：体积小


## webpack 打包优化
--- 

- 缩小loader匹配范围
- resolve.modules
- 抽离CSS
	- mini-css-extract-plugin，将CSS提取到单独的文件中，为每个包含CSS的JS文件创建一个CSS文件，并支持CSS 和 SourceMaps的按需加载。



### 代码压缩

- JS代码压缩
	- terser-webpack-plugin
- CSS代码压缩
	- css-minimizer-webpack-plugin
- HTML压缩
	- html-webpack-plugin


### 文件大小压缩

对文件的大小进行压缩，减少`http`传输过程中宽带的损耗

使用compression-webpack-plugin




### Tree shaking

摇树，利用 ESM 去除死代码



### 代码分离

将代码分离到不同的`bundle`中，之后我们可以按需加载，或者并行加载这些文件

代码分离可以分出更小的`bundle`，以及控制资源加载有现价，提供代码的加载性能

我们通过 `splitChunksPlugin` 来实现


## Vue
---
- 渲染列表加key
- 合理使用computed和watch
- 路由懒加载
- 第三方插件按需引入
- destory：销毁事件解绑自定义事件、setTimeout、DOM事件


## React
---
- 渲染列表加key
- 使用SCU避免重新渲染
- 路由懒加载
- 第三方插件按需引入
- 合理使用useMemo、memo、useCallback 缓存变量或者方法